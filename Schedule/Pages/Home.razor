@page "/"
@using Schedule.Application.Public.Wrappers
@using Schedule.Components
@using Schedule.Domain
@inject SnackbarWrappers SnackbarWrapper

<SearchBar Icon="@Icons.Material.Filled.Search" Placeholder="Search..." AutoFocus="true" @bind-Value="_searchTerm"/>

<MudGrid>
    @if (!_dataLoaded)
    {
        for (var i = 0; i < 20; i++)
        {
            <GroupCardSkeleton/>
        }
    }
    else
    {
        @foreach (var groupNode in _groups.Where(g => string.IsNullOrWhiteSpace(_searchTerm) || g.Name.Contains(_searchTerm, StringComparison.OrdinalIgnoreCase)))
        {
            <GroupCard Group="groupNode"/>
        }   
    }
</MudGrid>

<MudFab Color="Color.Tertiary" StartIcon="@Icons.Material.Filled.Refresh" IconColor="Color.Dark" Label="Refresh"
        ButtonType="ButtonType.Button" Class="fixed z-10" Style="bottom: 12px; right: 0;"
        OnClick="() => SnackbarWrapper.WrapOnErrorAsync(LoadMainPageContent)"/>
